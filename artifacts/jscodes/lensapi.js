(()=>{"use strict";var t={730:(t,e)=>{}},e={};function r(n){var s=e[n];if(void 0!==s)return s.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{r(730);function t(t,e,r){const n=e.split("|").map((t=>t.trim()));for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}function e(e,r,n){for(let s in r){let i=r[s];const o=n?n[s]:null;o&&t(i,o,s),Object.defineProperty(e,s,{enumerable:!0,value:i,writable:!1})}}const n="6.6.3";function s(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(s).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[15&t[n]];return r}if("object"==typeof t&&"function"==typeof t.toJSON)return s(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${s(e)}: ${s(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function i(t,e){return t&&t.code===e}function o(t,r,i,o){if(!t)throw function(t,r,i){{const e=[];if(i){if("message"in i||"code"in i||"name"in i)throw new Error(`value will overwrite populated values: ${s(i)}`);for(const t in i){const r=i[t];e.push(t+"="+s(r))}}e.push(`code=${r}`),e.push(`version=${n}`),e.length&&(t+=" ("+e.join(", ")+")")}let o;switch(r){case"INVALID_ARGUMENT":o=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":o=new RangeError(t);break;default:o=new Error(t)}return e(o,{code:r}),i&&Object.assign(o,i),o}(r,i,o)}function a(t,e,r,n){o(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){const t=String.fromCharCode(233).normalize("NFD");if(t!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);const u=BigInt(0),c=BigInt(1),l=9007199254740991;function f(t,e){const r=d(t,"value"),n=BigInt(y(e,"bits"));return r&(c<<n)-c}function h(t,e){switch(typeof t){case"bigint":return t;case"number":return a(Number.isInteger(t),"underflow",e||"value",t),a(t>=-l&&t<=l,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(r){a(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}a(!1,"invalid BigNumberish value",e||"value",t)}function d(t,e){const r=h(t,e);return o(r>=u,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const g="0123456789abcdef";function p(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=g[r>>4],e+=g[15&r];return BigInt(e)}return h(t)}function y(t,e){switch(typeof t){case"bigint":return a(t>=-l&&t<=l,"overflow",e||"value",t),Number(t);case"number":return a(Number.isInteger(t),"underflow",e||"value",t),a(t>=-l&&t<=l,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return y(BigInt(t),e)}catch(r){a(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}a(!1,"invalid numeric value",e||"value",t)}function w(t){const e=d(t,"value");if(e===u)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let t=0;t<n.length;t++){const e=2*t;n[t]=parseInt(r.substring(e,e+2),16)}return n}const b={};function m(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new I(b,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function E(t,e){return new I(b,`bytes${e||""}`,t,{size:e})}const v=Symbol.for("_ethers_typed");class I{type;value;#t;_typedSymbol;constructor(t,r,n,s){null==s&&(s=null),function(t,e,r){if(null==r&&(r=""),t!==e){let t=r,e="new";r&&(t+=".",e+=" "+r),o(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}(b,t,"Typed"),e(this,{_typedSymbol:v,type:r,value:n}),this.#t=s,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#t}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#t?-1:!1===this.#t?this.value.length:null}static from(t,e){return new I(b,t,e)}static uint8(t){return m(t,8)}static uint16(t){return m(t,16)}static uint24(t){return m(t,24)}static uint32(t){return m(t,32)}static uint40(t){return m(t,40)}static uint48(t){return m(t,48)}static uint56(t){return m(t,56)}static uint64(t){return m(t,64)}static uint72(t){return m(t,72)}static uint80(t){return m(t,80)}static uint88(t){return m(t,88)}static uint96(t){return m(t,96)}static uint104(t){return m(t,104)}static uint112(t){return m(t,112)}static uint120(t){return m(t,120)}static uint128(t){return m(t,128)}static uint136(t){return m(t,136)}static uint144(t){return m(t,144)}static uint152(t){return m(t,152)}static uint160(t){return m(t,160)}static uint168(t){return m(t,168)}static uint176(t){return m(t,176)}static uint184(t){return m(t,184)}static uint192(t){return m(t,192)}static uint200(t){return m(t,200)}static uint208(t){return m(t,208)}static uint216(t){return m(t,216)}static uint224(t){return m(t,224)}static uint232(t){return m(t,232)}static uint240(t){return m(t,240)}static uint248(t){return m(t,248)}static uint256(t){return m(t,256)}static uint(t){return m(t,256)}static int8(t){return m(t,-8)}static int16(t){return m(t,-16)}static int24(t){return m(t,-24)}static int32(t){return m(t,-32)}static int40(t){return m(t,-40)}static int48(t){return m(t,-48)}static int56(t){return m(t,-56)}static int64(t){return m(t,-64)}static int72(t){return m(t,-72)}static int80(t){return m(t,-80)}static int88(t){return m(t,-88)}static int96(t){return m(t,-96)}static int104(t){return m(t,-104)}static int112(t){return m(t,-112)}static int120(t){return m(t,-120)}static int128(t){return m(t,-128)}static int136(t){return m(t,-136)}static int144(t){return m(t,-144)}static int152(t){return m(t,-152)}static int160(t){return m(t,-160)}static int168(t){return m(t,-168)}static int176(t){return m(t,-176)}static int184(t){return m(t,-184)}static int192(t){return m(t,-192)}static int200(t){return m(t,-200)}static int208(t){return m(t,-208)}static int216(t){return m(t,-216)}static int224(t){return m(t,-224)}static int232(t){return m(t,-232)}static int240(t){return m(t,-240)}static int248(t){return m(t,-248)}static int256(t){return m(t,-256)}static int(t){return m(t,-256)}static bytes1(t){return E(t,1)}static bytes2(t){return E(t,2)}static bytes3(t){return E(t,3)}static bytes4(t){return E(t,4)}static bytes5(t){return E(t,5)}static bytes6(t){return E(t,6)}static bytes7(t){return E(t,7)}static bytes8(t){return E(t,8)}static bytes9(t){return E(t,9)}static bytes10(t){return E(t,10)}static bytes11(t){return E(t,11)}static bytes12(t){return E(t,12)}static bytes13(t){return E(t,13)}static bytes14(t){return E(t,14)}static bytes15(t){return E(t,15)}static bytes16(t){return E(t,16)}static bytes17(t){return E(t,17)}static bytes18(t){return E(t,18)}static bytes19(t){return E(t,19)}static bytes20(t){return E(t,20)}static bytes21(t){return E(t,21)}static bytes22(t){return E(t,22)}static bytes23(t){return E(t,23)}static bytes24(t){return E(t,24)}static bytes25(t){return E(t,25)}static bytes26(t){return E(t,26)}static bytes27(t){return E(t,27)}static bytes28(t){return E(t,28)}static bytes29(t){return E(t,29)}static bytes30(t){return E(t,30)}static bytes31(t){return E(t,31)}static bytes32(t){return E(t,32)}static address(t){return new I(b,"address",t)}static bool(t){return new I(b,"bool",!!t)}static bytes(t){return new I(b,"bytes",t)}static string(t){return new I(b,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new I(b,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===v}static dereference(t,e){if(I.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}function L(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let r=2;for(let n=0;n<e.length;n++)e[n]=parseInt(t.substring(r,r+2),16),r+=2;return e}a(!1,"invalid BytesLike value",e||"value",t)}function x(t,e){return L(t,e,!1)}function U(t,e){return L(t,e,!0)}const N="0123456789abcdef";function A(t){const e=x(t);let r="0x";for(let t=0;t<e.length;t++){const n=e[t];r+=N[(240&n)>>4]+N[15&n]}return r}function B(t){return"0x"+t.map((t=>A(t).substring(2))).join("")}const T=32,F=new Uint8Array(T),O=["then"],R={};function S(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}class k extends Array{#e;constructor(...t){const e=t[0];let r=t[1],n=(t[2]||[]).slice(),s=!0;e!==R&&(r=t,n=[],s=!1),super(r.length),r.forEach(((t,e)=>{this[e]=t}));const i=n.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(this.#e=Object.freeze(r.map(((t,e)=>{const r=n[e];return null!=r&&1===i.get(r)?r:null}))),s)return Object.freeze(this),new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const r=y(e,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const n=t[r];return n instanceof Error&&S(`index ${r}`,n),n}if(O.indexOf(e)>=0)return Reflect.get(t,e,r);const n=t[e];if(n instanceof Function)return function(...e){return n.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}})}toArray(){const t=[];return this.forEach(((e,r)=>{e instanceof Error&&S(`index ${r}`,e),t.push(e)})),t}toObject(){return this.#e.reduce(((t,e,r)=>(o(null!=e,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),e in t||(t[e]=this.getValue(e)),t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const r=[],n=[];for(let s=t;s<e;s++)r.push(this[s]),n.push(this.#e[s]);return new k(R,r,n)}filter(t,e){const r=[],n=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&S(`index ${s}`,i),t.call(e,i,s,this)&&(r.push(i),n.push(this.#e[s]))}return new k(R,r,n)}map(t,e){const r=[];for(let n=0;n<this.length;n++){const s=this[n];s instanceof Error&&S(`index ${n}`,s),r.push(t.call(e,s,n,this))}return r}getValue(t){const e=this.#e.indexOf(t);if(-1===e)return;const r=this[e];return r instanceof Error&&S(`property ${JSON.stringify(t)}`,r.error),r}static fromItems(t,e){return new k(R,t,e)}}function $(t){let e=w(t);return o(e.length<=T,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:T,offset:e.length}),e.length!==T&&(e=U(B([F.slice(e.length%T),e]))),e}class _{name;type;localName;dynamic;constructor(t,r,n,s){e(this,{name:t,type:r,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){a(!1,t,this.localName,e)}}class V{#r;#n;constructor(){this.#r=[],this.#n=0}get data(){return B(this.#r)}get length(){return this.#n}#s(t){return this.#r.push(t),this.#n+=t.length,t.length}appendWriter(t){return this.#s(U(t.data))}writeBytes(t){let e=U(t);const r=e.length%T;return r&&(e=U(B([e,F.slice(r)]))),this.#s(e)}writeValue(t){return this.#s($(t))}writeUpdatableValue(){const t=this.#r.length;return this.#r.push(F),this.#n+=T,e=>{this.#r[t]=$(e)}}}class C{allowLoose;#r;#i;constructor(t,r){e(this,{allowLoose:!!r}),this.#r=U(t),this.#i=0}get data(){return A(this.#r)}get dataLength(){return this.#r.length}get consumed(){return this.#i}get bytes(){return new Uint8Array(this.#r)}#o(t,e,r){let n=Math.ceil(e/T)*T;return this.#i+n>this.#r.length&&(this.allowLoose&&r&&this.#i+e<=this.#r.length?n=e:o(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:U(this.#r),length:this.#r.length,offset:this.#i+n})),this.#r.slice(this.#i,this.#i+n)}subReader(t){return new C(this.#r.slice(this.#i+t),this.allowLoose)}readBytes(t,e){let r=this.#o(0,t,!!e);return this.#i+=r.length,r.slice(0,t)}readValue(){return p(this.readBytes(T))}readIndex(){return y(p(this.readBytes(T)))}}const j=BigInt(0),D=BigInt(1),M=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class z extends _{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=U(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}function P(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function H(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const q={number:P,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:H,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");P(t.outputLen),P(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){H(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}},G=q,X=BigInt(2**32-1),J=BigInt(32);function W(t,e=!1){return e?{h:Number(t&X),l:Number(t>>J&X)}:{h:0|Number(t>>J&X),l:0|Number(t&X)}}const K={fromBig:W,split:function(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=W(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]},toBig:(t,e)=>BigInt(t>>>0)<<J|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,r)=>t<<r|e>>>32-r,rotlSL:(t,e,r)=>e<<r|t>>>32-r,rotlBH:(t,e,r)=>e<<r-32|t>>>64-r,rotlBL:(t,e,r)=>t<<r-32|e>>>64-r,add:function(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:0|s}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,add5H:(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,add5L:(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0)};"object"==typeof self&&"crypto"in self&&self.crypto;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Z(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class Q{clone(){return this._cloneInto()}}const[Y,tt,et]=[[],[],[]],rt=BigInt(0),nt=BigInt(1),st=BigInt(2),it=BigInt(7),ot=BigInt(256),at=BigInt(113);for(let t=0,e=nt,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Y.push(2*(5*n+r)),tt.push((t+1)*(t+2)/2%64);let s=rt;for(let t=0;t<7;t++)e=(e<<nt^(e>>it)*at)%ot,e&st&&(s^=nt<<(nt<<BigInt(t))-nt);et.push(s)}const[ut,ct]=K.split(et,!0),lt=(t,e,r)=>r>32?K.rotlBH(t,e,r):K.rotlSH(t,e,r),ft=(t,e,r)=>r>32?K.rotlBL(t,e,r):K.rotlSL(t,e,r);class ht extends Q{constructor(t,e,r,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,G.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,s=(e+2)%10,i=r[s],o=r[s+1],a=lt(i,o,1)^r[n],u=ft(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=u}let e=t[2],s=t[3];for(let r=0;r<24;r++){const n=tt[r],i=lt(e,s,n),o=ft(e,s,n),a=Y[r];e=t[a],s=t[a+1],t[a]=i,t[a+1]=o}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=ut[n],t[1]^=ct[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){G.exists(this);const{blockLen:e,state:r}=this,n=(t=Z(t)).length;for(let s=0;s<n;){const i=Math.min(e-this.pos,n-s);for(let e=0;e<i;e++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){G.exists(this,!1),G.bytes(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,s=t.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);t.set(e.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return G.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(G.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return t||(t=new ht(e,r,n,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=n,t.enableXOF=i,t.destroyed=this.destroyed,t}}const dt=(t,e,r)=>function(t){const e=e=>t().update(Z(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}((()=>new ht(e,t,r))),gt=(dt(6,144,28),dt(6,136,32),dt(6,104,48),dt(6,72,64),dt(1,144,28),dt(1,136,32)),pt=(dt(1,104,48),dt(1,72,64),(t,e,r)=>function(t){const e=(e,r)=>t(r).update(Z(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e}(((n={})=>new ht(e,t,void 0===n.dkLen?r:n.dkLen,!0))));pt(31,168,16),pt(31,136,32);let yt=!1;const wt=function(t){return gt(t)};let bt=wt;function mt(t){const e=x(t,"data");return A(bt(e))}mt._=wt,mt.lock=function(){yt=!0},mt.register=function(t){if(yt)throw new TypeError("keccak256 is locked");bt=t},Object.freeze(mt);const Et=BigInt(0),vt=BigInt(36);function It(t){const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=x(mt(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const Lt={};for(let t=0;t<10;t++)Lt[String(t)]=String(t);for(let t=0;t<26;t++)Lt[String.fromCharCode(65+t)]=String(10+t);const xt=15;function Ut(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>Lt[t])).join("");for(;e.length>=xt;){let t=e.substring(0,xt);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const Nt=function(){const t={};for(let e=0;e<36;e++){t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e)}return t}();function At(t){if(a("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=It(t);return a(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){a(t.substring(2,4)===Ut(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=Et;for(let r=0;r<t.length;r++)e=e*vt+Nt[t[r]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return It("0x"+e)}a(!1,"invalid address","address",t)}class Bt extends _{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function Tt(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return o(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),o(!t[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),t[n]=!0,r[n]}))}else a(!1,"invalid tuple value","tuple",r);a(e.length===n.length,"types/value length mismatch","tuple",r);let s=new V,i=new V,u=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=i.length;t.encode(i,r);let n=s.writeUpdatableValue();u.push((t=>{n(t+e)}))}else t.encode(s,r)})),u.forEach((t=>{t(s.length)}));let c=t.appendWriter(s);return c+=t.appendWriter(i),c}function Ft(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach((e=>{let o=null;if(e.dynamic){let r=t.readIndex(),n=s.subReader(r);try{o=e.decode(n)}catch(t){if(i(t,"BUFFER_OVERRUN"))throw t;o=t,o.baseType=e.name,o.name=e.localName,o.type=e.type}}else try{o=e.decode(t)}catch(t){if(i(t,"BUFFER_OVERRUN"))throw t;o=t,o.baseType=e.name,o.name=e.localName,o.type=e.type}if(null==o)throw new Error("investigate");r.push(o),n.push(e.localName||null)})),k.fromItems(r,n)}class Ot extends _{coder;length;constructor(t,r,n){super("array",t.type+"["+(r>=0?r:"")+"]",n,-1===r||t.dynamic),e(this,{coder:t,length:r})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){const r=I.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,t.writeValue(r.length)),function(t,e,r){null==r&&(r=""),r&&(r=": "+r),o(t>=e,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),o(t<=e,"too many arguemnts"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let t=0;t<r.length;t++)s.push(this.coder);return Tt(t,s,r)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),o(e*T<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*T,length:t.dataLength}));let r=[];for(let t=0;t<e;t++)r.push(new Bt(this.coder));return Ft(t,r)}}class Rt extends _{coders;constructor(t,r){let n=!1;const s=[];t.forEach((t=>{t.dynamic&&(n=!0),s.push(t.type)}));super("tuple","tuple("+s.join(",")+")",r,n),e(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let s=r.localName;s&&1===e[s]&&("length"===s&&(s="_length"),null==t[s]&&(t[s]=t[n]))})),Object.freeze(t)}encode(t,e){const r=I.dereference(e,"tuple");return Tt(t,this.coders,r)}decode(t){return Ft(t,this.coders)}}const St=new class extends _{size;signed;constructor(t,r,n){const s=(r?"int":"uint")+8*t;super(s,s,n,!1),e(this,{size:t,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=h(I.dereference(e,this.type)),n=f(M,256);if(this.signed){let t=f(n,8*this.size-1);(r>t||r<-(t+D))&&this._throwError("value out-of-bounds",e),r=function(t,e){let r=h(t,"value");const n=BigInt(y(e,"width")),s=c<<n-c;if(r<u)return r=-r,o(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),(~r&(c<<n)-c)+c;return o(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),r}(r,256)}else(r<j||r>f(n,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=f(t.readValue(),8*this.size);return this.signed&&(e=function(t,e){const r=d(t,"value"),n=BigInt(y(e,"width"));if(o(r>>n===u,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-c)return-((~r&(c<<n)-c)+c);return r}(e,8*this.size)),e}}(32,!1,"uint256"),kt=new class extends z{constructor(t){super("bytes",t)}decode(t){return A(super.decode(t))}}("bytes");new Ot(new class extends _{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=I.dereference(e,"string");try{r=At(r)}catch(t){return this._throwError(t.message,e)}return t.writeValue(r)}decode(t){return At(function(t,e){let r=d(t,"value").toString(16);if(null==e)r.length%2&&(r="0"+r);else{const n=y(e,"width");for(o(2*n>=r.length,`value exceeds width (${n} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<2*n;)r="0"+r}return"0x"+r}(t.readValue(),20))}}("address"),10,"address"),new Ot(kt,10,"bytes"),new Ot(St,10,"uint256");function $t(t){return function(t,e){const r=new Rt(t,"_"),n=new V;return r.encode(n,e),n.data}([St,St,St],t)}var _t;function Vt(t){switch(t){case _t.BadLensProfileId:return 1;case _t.FailedToFetchData:return 2;case _t.FailedToDecode:return 3;case _t.MalformedRequest:return 4;default:return 0}}!function(t){t.BadLensProfileId="BadLensProfileId",t.FailedToFetchData="FailedToFetchData",t.FailedToDecode="FailedToDecode",t.MalformedRequest="MalformedRequest"}(_t||(_t={})),globalThis.scriptOutput=function(t,e){let r,n;console.log(`handle req: ${t}`);try{[r,n]=(s=t,new Rt([St,kt],"_").decode(new C(s,i)))}catch(t){return console.info("Malformed request received"),$t([2,0,Vt(t)])}var s,i;const o=function(t){var e=t.toString();if(!function(t){return/^0x[0-9a-f]+$/.test(t.toLowerCase())}(e))throw _t.BadLensProfileId;e=e.slice(2);for(var r="",n=0;n<e.length;n+=2)r+=String.fromCharCode(parseInt(e.substring(n,n+2),16));return r}(n);console.log(`Request received for profile ${o}`);try{const t=function(t,e){let r=function(t){for(var e="",r=0;r<t.length;r++)e+=t.charCodeAt(r).toString(16);return"0x"+e}(JSON.stringify({query:`query Profile {\n            profile(request: { profileId: "${e}" }) {\n                stats {\n                    totalFollowers\n                    totalFollowing\n                    totalPosts\n                    totalComments\n                    totalMirrors\n                    totalPublications\n                    totalCollects\n                }\n            }\n        }`})),n=pink.batchHttpRequest([{url:t,method:"POST",headers:{"Content-Type":"application/json","User-Agent":"phat-contract"},body:r,returnTextBody:!0}],1e4)[0];if(200!==n.statusCode)throw console.log(`Fail to read Lens api with status code: ${n.statusCode}, error: ${n.error||n.body}}`),_t.FailedToFetchData;let s=n.body;if("string"!=typeof s)throw _t.FailedToDecode;return JSON.parse(s)}(e,o);let n=t.data.profile.stats.totalCollects;return console.log("response:",[0,r,n]),$t([0,r,n])}catch(t){if(t===_t.FailedToFetchData)throw t;return console.log("error:",[2,r,t]),$t([2,r,Vt(t)])}}.apply(null,globalThis.scriptArgs)})()})();
